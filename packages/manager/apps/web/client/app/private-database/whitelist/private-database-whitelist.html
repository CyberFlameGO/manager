<div data-ng-controller="PrivateDatabaseWhitelistCtrl as listCtrl">
    <div class="row">
        <div class="col-md-9">
            <div data-ovh-alert="{{alerts.main}}"></div>

            <div
                class="alert alert-warning"
                role="alert"
                data-translate="privateDatabase_tabs_whitelist_list_no_whitelist_info"
                data-ng-if="listCtrl.isWhitelistEmpty()"
            ></div>

            <h3
                data-translate="privateDatabase_tabs_whitelist_webhosting_network_access_title"
            ></h3>

            <div>
                <oui-switch
                    class="mt-2 d-inline-block"
                    data-model="$ctrl.vm.protection.enabled"
                    data-on-change="listCtrl.switchWebhostingAccess()"
                ></oui-switch>
                <span
                    class="mt-2 ml-1 d-inline-block align-middle oui-badge"
                    data-translate="'privateDatabase_tabs_whitelist_webhosting_network_access_' + listCtrl.webhostingAccess | translate"
                    data-ng-class="{
                      'oui-badge_success': $ctrl.vm.protection.enabled,
                      'oui-badge_warning': $ctrl.vm.protection.isUnavailable,
                      'oui-badge_error': !$ctrl.vm.protection.enabled && !$ctrl.vm.protection.isUnavailable
                    }"
                ></span>
            </div>

            <h3 data-translate="privateDatabase_add_authorized_ip_title"></h3>

            <oui-datagrid
                data-rows="listCtrl.whitelistIps"
                data-row-loader="listCtrl.transformItem($row)"
            >
                <oui-datagrid-column
                    data-title="'privateDatabase_tabs_whitelist_list_ip_network' | translate"
                    data-property="ip"
                    data-sortable
                ></oui-datagrid-column>
                <oui-datagrid-column
                    data-title="'privateDatabase_tabs_whitelist_list_service' | translate"
                    data-property="service"
                >
                    <i
                        class="oui-icon oui-icon-success"
                        data-ng-show="$row.service"
                        aria-hidden="true"
                    ></i>
                </oui-datagrid-column>
                <oui-datagrid-column
                    data-title="'privateDatabase_tabs_whitelist_list_sftp' | translate"
                    data-property="sftp"
                >
                    <i
                        class="oui-icon oui-icon-success"
                        data-ng-show="$row.sftp"
                        aria-hidden="true"
                    ></i>
                </oui-datagrid-column>
                <oui-datagrid-column
                    data-title="'privateDatabase_tabs_whitelist_list_status' | translate"
                    data-property="name"
                >
                    <span
                        class="label label-info"
                        data-ng-if="$row.creating"
                        data-translate="privateDatabase_tabs_whitelist_list_status_creating"
                    ></span>
                    <span
                        class="label label-info"
                        data-ng-if="$row.updating"
                        data-translate="privateDatabase_tabs_whitelist_list_status_updating"
                    ></span>
                    <span
                        class="label label-info"
                        data-ng-if="$row.deleting"
                        data-translate="privateDatabase_tabs_whitelist_list_status_deleting"
                    ></span>
                    {{ $row.name | wucSliceContent: 50 }}
                </oui-datagrid-column>
                <oui-action-menu data-compact data-placement="end">
                    <oui-action-menu-item
                        data-on-click="listCtrl.editWhitelist($row)"
                        ><span
                            data-translate="privateDatabase_tabs_whitelist_list_popover_edit"
                        ></span>
                    </oui-action-menu-item>
                    <oui-action-menu-item
                        data-on-click="listCtrl.deleteWhitelist($row)"
                        ><span
                            data-translate="privateDatabase_tabs_whitelist_list_popover_delete"
                        ></span>
                    </oui-action-menu-item>
                </oui-action-menu>
            </oui-datagrid>
        </div>

        <div class="col-md-3 mt-5 mt-lg-0">
            <button
                class="btn btn-block btn-default"
                type="button"
                data-translate="privateDatabase_tabs_whitelist_list_add_whitelist"
                data-ng-click="listCtrl.createWhitelist()"
            ></button>
        </div>
    </div>
</div>
